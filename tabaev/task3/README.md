# Class Data Sharing

## CDS с базовыми классами

Для запуска CDS с использованием только базовых классов
используется скрипт

### Запуск

Для запуска приложения с использованием CDS используется скрипт:

```bash
./start_client_cds_on.sh
```

Для запуска приложения без использования CDS используется скрипт:

```bash
./start_client_cds_off.sh
```

### Логгирование загруженных классов
Информация о загруженных классах записывается в следующие файлы:

* `cds_off.log` - запуск без CDS
* `cds_on.log` -  запуск с CDS

### Результаты

Я провел по 10 запусков для каждого из вариантов
(с включенным и отключенным CDS) и получили следующие результаты:

* Среднее время запуска без CDS: 7438 ms
* Среднее время запуска с CDS: 7378 ms

Таким образом, с включенным CDS наблюдается выигрыш в скорости запуска ~60 мс.

## App CDS

### Запуск

Перед запуском создайте jar 

```bash
mvn clean install
```

Для создания списка классов `app_classes.lst` для App CDS ипользуется скрипт: 

```bash
./start_dump_class_list.sh
```

Для создания архива `app_cds.jsa` для более быстрого запуска используется скрипт:

```bash
./start_dump_error.sh
```

Запуск с использованием архива `app_cds.jsa`

```bash
./start_dump_app_cds.sh
```

### Результаты

* Среднее время запуска с CDS: 7380 ms

Таким образом, с использованием App CDS не наблюдается выигрыш в скорость

### Ошибка 

При формировании архива с использованием classpath с указанием target/classes 
появляется ошибка `Error occurred during initialization of VM
Cannot have non-empty directory in paths
`

## CDS с использованием Spring

### Запуск

Создание архива `app_spring_cds.jsa` для более быстрого запуска используется скрипт:

```bash
./start_spring_dump_cds.sh
```

Запуск с использованием архива `app_cds.jsa`

```bash
./start_with_spring_cds.sh
```


### Результаты

* Среднее время запуска с Spring CDS: 5907 ms

Таким образом, использование Spring CDS позволяет выиграть значительное время при старте приложения


