# ДЗ-17
## moryakovdv

## resilience4j

## Стек:
JDK 17  
Maven  
Spring-boot  
ApacheJMeter  
resilience4j  

## Основные классы
- otus.moryakovdv.task17.web.UserController - обеспечивает рест-сервисы для работы с пользователем  
- otus.moryakovdv.task17.web.UserService - содержит бекэнд-методы, защищенные от перегрузки с помощью аннотаций Resilience4j
- otus.moryakovdv.task17.jmeter.EmbeddedJmeter - обеспечивает запуск нагрузочного скрипта task17.jmx без GUI Apache JMeter   
- task17.jmx - скрипт тестироввания сервиса с профилем изменения нагрузки  

## Сборка
*$ mvn clean install*

## Запуск

*$ ./startup.sh* - общий запускающий скрипт  

## Usage

http://localhost:8888/getUserAge?id=15

## Результаты 

Нагрузочный скрипт настроен на вызов трех методов, каждый из которых возвращает возраст пользователя, но защищен разным механизмом:
 - RateLimit (запросов/сек) - отменяет вызов метода, если превышен порог 20 запросов/сек  
 - RateLimit (запросов/мин) - отменяет вызов метода, если превышен порог 30 запросов/мин  
 - CircuitBreaker - отменяет вызов метода, если более 50% вызовов метода в течение заданного скольщящего окна завершились с ошибкой  

Скриншоты Jmeter и сообщений об ошибках









